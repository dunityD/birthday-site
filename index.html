<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Наш Путь — дневник памяти</title>
  <meta name="description" content="Длинный мобильный сайт-поздравление: от первой встречи до сегодня. Без неона, чистый минимализм: чёрный/белый/серый с лёгкими красными акцентами." />
  <meta name="theme-color" content="#0a0a0a" />
  <style>
    /* =====================================================================
       DESIGN TOKENS (без неона)
       Цвета: чёрный/белый/серый, акценты — красный строго дозирован
       Шрифт — системный, аккуратные размеры, большой межстрочный интервал
       ===================================================================== */
    :root{
      --bg: #0a0a0a;           /* фон */
      --surface: #111;          /* карточки */
      --surface-2: #161616;     /* вторичный фон */
      --line: #1f1f1f;          /* линии/границы */
      --text: #e8e8e8;          /* основной текст */
      --muted: #a5a5a5;         /* вторичный текст */
      --muted-2: #8a8a8a;       /* третичный */
      --accent: #c9372c;        /* красный (акцент) */
      --accent-ink: #fff1f0;    /* светлая для инверсии */
      --ok: #28a745;            /* зелёный: позитив/галочки */
      --warn: #b58900;          /* золотистый: заметки */
      --radius-xl: 24px;
      --radius-lg: 18px;
      --radius-md: 12px;
      --radius-sm: 8px;
      --pad: 16px;
      --shadow-1: 0 6px 18px rgba(0,0,0,.35);
      --shadow-2: 0 10px 34px rgba(0,0,0,.45);
      --maxw: 860px; /* контентная ширина */
      --fs-hero: clamp(24px, 7vw, 44px);
      --fs-h2: clamp(18px, 5vw, 28px);
      --fs-text: clamp(15px, 4vw, 18px);
      --fs-small: 13px;
      --ease-1: cubic-bezier(.2,.8,.2,1);
    }

    /* Светлая тема (на всякий случай, без неона) */
    body.light{
      --bg:#fafafa; --surface:#fff; --surface-2:#f4f4f4; --line:#e7e7e7;
      --text:#1b1b1b; --muted:#6b6b6b; --muted-2:#7a7a7a; --accent:#b3261e; --accent-ink:#fff5f4;
      --shadow-1: 0 6px 18px rgba(0,0,0,.08);
      --shadow-2: 0 10px 34px rgba(0,0,0,.12);
    }

    /* =====================================================================
       RESET + BASE
       ===================================================================== */
    *,*::before,*::after{ box-sizing: border-box }
    html,body{ height:100% }
    html{ scroll-behavior: smooth }
    body{ margin:0; background:var(--bg); color:var(--text); font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji"; line-height:1.7 }
    img,video{ max-width:100%; display:block }
    a{ color:inherit; text-decoration:none }
    button{ font:inherit }

    .wrap{ width:min(100%, var(--maxw)); margin:0 auto; padding:0 var(--pad) 120px }

    .sr-only{ position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0 }

    /* =====================================================================
       TOP BAR + PROGRESS
       ===================================================================== */
    .topbar{ position:sticky; top:0; z-index:70; backdrop-filter: blur(8px) saturate(120%);
      background: color-mix(in srgb, var(--bg) 70%, transparent); border-bottom:1px solid var(--line) }
    .topbar-inner{ display:flex; align-items:center; justify-content:space-between; gap:10px; padding:10px var(--pad) }
    .brand{ display:flex; align-items:center; gap:10px }
    .brand .dot{ width:10px; height:10px; border-radius:50%; background:var(--accent) }
    .brand .title{ font-weight:800; letter-spacing:.3px; font-size:16px }
    .brand .muted{ color:var(--muted); font-size:var(--fs-small) }
    .actions{ display:flex; align-items:center; gap:8px }
    .icon-btn{ background:var(--surface); border:1px solid var(--line); color:var(--text); width:40px; height:40px; border-radius:12px; display:grid; place-items:center; box-shadow:var(--shadow-1); cursor:pointer }

    .progress{ height:3px; background:var(--line) }
    .progress > i{ display:block; height:100%; width:0%; background:var(--accent); transition:width .15s linear }

    /* =====================================================================
       HERO (без неона, чисто)
       ===================================================================== */
    .hero{ position:relative; min-height:70vh; display:grid; place-items:center; overflow:hidden }
    .hero-bg{ position:absolute; inset:0; background:
       radial-gradient(900px 400px at 50% 5%, rgba(255,255,255,.04), transparent 60%),
       radial-gradient(700px 300px at 15% 80%, rgba(255,255,255,.03), transparent 60%),
       radial-gradient(700px 300px at 85% 70%, rgba(255,255,255,.03), transparent 60%); pointer-events:none }

    .hero-card{ position:relative; margin-top:10vh; background:var(--surface); border:1px solid var(--line); border-radius:var(--radius-xl); box-shadow:var(--shadow-2); padding:28px; text-align:center }
    .hero h1{ margin:0 0 8px; font-size:var(--fs-hero); line-height:1.1; letter-spacing:.2px }
    .hero p{ margin:6px 0 0; color:var(--muted); font-size:var(--fs-text) }

    .chips{ display:flex; gap:8px; flex-wrap:wrap; justify-content:center; margin-top:14px }
    .chip{ font-size:12px; color:var(--muted); padding:6px 10px; border-radius:999px; border:1px solid var(--line); background:var(--surface-2) }

    /* =====================================================================
       NAV TABS (по разделам/годам)
       ===================================================================== */
    .tabs{ position:sticky; top:54px; z-index:60; background:var(--surface-2); border-bottom:1px solid var(--line) }
    .tabs-inner{ display:flex; gap:10px; overflow:auto; padding:10px var(--pad) }
    .tab{ white-space:nowrap; font-size:13px; border:1px solid var(--line); background:var(--surface); color:var(--muted); padding:8px 12px; border-radius:999px; cursor:pointer }
    .tab.active{ color:var(--accent-ink); background:var(--accent); border-color:var(--accent) }
    .timeline{ display:grid; gap:30px; margin-top:32px }
    .chapter{ display:grid; grid-template-columns: 28px 1fr; gap:14px; align-items:stretch }
    .dot-col{ position:relative }
    .dot{ width:12px; height:12px; border-radius:50%; background:var(--muted-2); margin-top:10px }
    .chapter.active .dot{ background:var(--accent) }
    .dot-col::before{ content:""; position:absolute; left:5px; top:-20px; bottom:-20px; width:2px; background:var(--line) }

    .card{ background:var(--surface); border:1px solid var(--line); border-radius:var(--radius-lg); box-shadow:var(--shadow-1); padding:18px }
    .time{ font-size:12px; letter-spacing:.3px; color:var(--muted); display:flex; gap:10px; align-items:center }
    .badge{ font-size:11px; border:1px solid var(--line); padding:3px 8px; border-radius:999px; color:var(--muted) }
    .h2{ font-weight:800; font-size:var(--fs-h2); margin:8px 0 8px }
    .text{ font-size:var(--fs-text) }

    .bubbles{ display:grid; gap:10px; margin-top:12px }
    .bubble{ padding:12px 14px; border-radius:14px; background:var(--surface-2); border:1px solid var(--line) }
    .bubble.me{ border-left:3px solid var(--accent) }
    .bubble.now{ border-left:3px solid #4b5563 }

    .gallery{ display:grid; grid-template-columns: repeat(3, 1fr); gap:8px; margin-top:12px }
    .gallery img{ border-radius:12px; border:1px solid var(--line); cursor:zoom-in }

    .quote{ border-left:4px solid var(--accent); padding:8px 0 8px 12px; color:var(--muted); font-style:italic; margin-top:8px }

    .reveal{ opacity:0; transform: translateY(14px); transition: .6s var(--ease-1) opacity, .6s var(--ease-1) transform }
    .reveal.show{ opacity:1; transform:none }

    /* =====================================================================
       DENSE SECTIONS: списки, чеклисты, аккордеоны, карусель фотоленты
       ===================================================================== */
    .checklist{ display:grid; gap:10px; margin-top:12px }
    .check{ display:flex; gap:10px; align-items:flex-start }
    .check i{ width:18px; height:18px; border-radius:4px; border:1px solid var(--line); background:var(--surface-2); display:grid; place-items:center; font-size:12px; color:var(--ok) }

    details{ background:var(--surface-2); border:1px solid var(--line); border-radius:12px; padding:12px 14px }
    summary{ cursor:pointer; color:var(--muted); font-size:14px }
    details[open]{ background:var(--surface) }

    .scroll-gallery{ display:flex; gap:10px; overflow:auto; padding:10px 0 }
    .scroll-gallery img{ height:160px; flex:0 0 auto; border-radius:12px; border:1px solid var(--line) }

    /* =====================================================================
       FINAL SECTION + actions (без неона)
       ===================================================================== */
    .final{ position:relative; margin-top:38px; display:grid; gap:14px }
    .final .big{ font-weight:900; font-size:clamp(24px, 6vw, 42px); line-height:1.15; letter-spacing:.2px }
    .final .type{ min-height:2.6em; border-left:3px solid var(--accent); padding-left:12px; white-space:pre-line }

    .actions{ display:flex; gap:10px; flex-wrap:wrap; margin-top:8px }
    .btn{ appearance:none; border:none; cursor:pointer; padding:12px 16px; border-radius:12px; background:var(--surface-2); color:var(--text); font-weight:700; border:1px solid var(--line); box-shadow:var(--shadow-1) }
    .btn.primary{ background:var(--accent); color:var(--accent-ink); border-color:var(--accent) }

    .bottom-bar{ position:fixed; left:0; right:0; bottom:0; display:flex; gap:10px; justify-content:center; padding:10px; background: color-mix(in srgb, var(--bg) 80%, transparent); border-top:1px solid var(--line); backdrop-filter: blur(6px) }
    .bottom-bar .btn{ flex:1; max-width:var(--maxw) }

    /* =====================================================================
       MODAL PREVIEW (просмотр фото/цитат)
       ===================================================================== */
    .modal{ position:fixed; inset:0; display:none; place-items:center; background: rgba(0,0,0,.6); z-index:90 }
    .modal.show{ display:grid }
    .modal-card{ width:min(92%, 720px); background:var(--surface); border:1px solid var(--line); border-radius:18px; box-shadow:var(--shadow-2); padding:16px }
    .modal-header{ display:flex; align-items:center; justify-content:space-between; gap:10px; margin-bottom:8px }
    .close{ width:36px; height:36px; border-radius:10px; border:1px solid var(--line); background:var(--surface-2); color:var(--text); cursor:pointer }

    /* =====================================================================
       MEDIA
       ===================================================================== */
    @media (min-width: 720px){
      .gallery{ grid-template-columns: repeat(4, 1fr) }
      .tabs{ top:62px }
    }
  </style>
</head>
<body>
  <!-- =================================================================== -->
  <!-- TOP BAR                                                             -->
  <!-- =================================================================== -->
  <header class="topbar">
    <div class="topbar-inner wrap" style="padding-bottom:8px">
      <div class="brand">
        <span class="dot" aria-hidden="true"></span>
        <div>
          <div class="title">Наш путь</div>
          <div class="muted">от первой встречи до сегодня</div>
        </div>
      </div>
      <div class="actions">
        <button id="themeBtn" class="icon-btn" title="Тема" aria-label="Переключить тему">🌓</button>
        <button id="shareBtn" class="icon-btn" title="Поделиться" aria-label="Поделиться">↗️</button>
      </div>
    </div>
    <div class="progress"><i id="progressBar"></i></div>
  </header>

  <!-- =================================================================== -->
  <!-- HERO                                                                -->
  <!-- =================================================================== -->
  <section class="wrap hero" id="hero">
    <div class="hero-bg" aria-hidden="true"></div>
    <div class="hero-card reveal">
      <h1>С Днём Рождения, <span id="herName">[Имя]</span>!</h1>
      <p class="muted">Это наш тихий архив — без пафоса, но со смыслом. От первых шагов до сегодняшнего дня.</p>
      <div class="chips" aria-label="теги-метки">
        <div class="chip">чёрный • белый • серый</div>
        <div class="chip">красный — только для важного</div>
        <div class="chip">мысли тогда / сейчас</div>
      </div>
    </div>
    <div class="sr-only">Прокрутите вниз к истории</div>
  </section>

  <!-- =================================================================== -->
  <!-- TABS (ГОДА/РАЗДЕЛЫ)                                                -->
  <!-- =================================================================== -->
  <nav class="tabs" aria-label="Навигация по разделам">
    <div class="tabs-inner wrap" id="tabs"></div>
  </nav>

  <!-- =================================================================== -->
  <!-- MAIN TIMELINE                                                       -->
  <!-- =================================================================== -->
  <main class="wrap" id="content">

    <!-- --------------------------------------------------------------- -->
    <!-- TEMPLATE CHAPTER (копируй/меняй)                                -->
    <!-- --------------------------------------------------------------- -->
    <article class="timeline" id="timeline">

      <!-- 1. Первая встреча -->
      <section class="chapter reveal" data-tag="начало" data-year="1">
        <div class="dot-col"><div class="dot"></div></div>
        <div class="card">
          <div class="time"><span class="badge">Первая встреча</span> <span>•</span> <span>Год: <strong>1</strong></span></div>
          <h2 class="h2">Где всё началось</h2>
          <p class="text">Опиши место и момент: что вокруг звучало, как пахло, что ты заметил(а) первым делом. Добавь смешную деталь или случайный глюк судьбы.</p>
          <div class="bubbles">
            <div class="bubble me"><strong>Мысли тогда:</strong> «…»</div>
            <div class="bubble now"><strong>Сейчас:</strong> «…»</div>
          </div>
          <div class="gallery" aria-label="Фото воспоминаний">
            <img src="" alt="фото 1" data-full="" />
            <img src="" alt="фото 2" data-full="" />
            <img src="" alt="фото 3" data-full="" />
          </div>
          <p class="quote">«Короткая фраза-лейтмотив, связанная с началом.»</p>
        </div>
      </section>

      <!-- 2. Первое маленькое приключение -->
      <section class="chapter reveal" data-tag="приключение" data-year="1">
        <div class="dot-col"><div class="dot"></div></div>
        <div class="card">
          <div class="time"><span class="badge">Мини-приключение</span> <span>•</span> <span>Место: …</span></div>
          <h2 class="h2">Первые шаги в одну сторону</h2>
          <p class="text">Опиши забавный эпизод: как карта легла не так, как планировали, и почему это было к лучшему.</p>
          <ul class="checklist">
            <li class="check"><i>✓</i><span>Случайный шутерский мем стал общим.</span></li>
            <li class="check"><i>✓</i><span>Узнал(а) новую грань её характера.</span></li>
            <li class="check"><i>✓</i><span>Сохранён первый «секретный» снимок.</span></li>
          </ul>
        </div>
      </section>

      <!-- 3. Ночные разговоры -->
      <section class="chapter reveal" data-tag="разговоры" data-year="1">
        <div class="dot-col"><div class="dot"></div></div>
        <div class="card">
          <div class="time"><span class="badge">Глубокий разговор</span> <span>•</span> <span>Поздняя ночь</span></div>
          <h2 class="h2">Когда тишина стала уютной</h2>
          <p class="text">Тот самый вечер, когда слова сами находили форму. Пиши честно: что впервые решился(ась) сказать? Что услышал(а) в ответ?</p>
          <details>
            <summary>Моя внутренняя заметка</summary>
            <p class="text" style="margin:8px 0 0">Инсайт/откровение, которое не всегда скажешь вслух, но здесь можно оставить как якорь.</p>
          </details>
        </div>
      </section>

      <!-- 4. Первый «щелчок» внутри -->
      <section class="chapter reveal" data-tag="поворот" data-year="1">
        <div class="dot-col"><div class="dot"></div></div>
        <div class="card">
          <div class="time"><span class="badge">Поворот</span> <span>•</span> <span>Эмоция: 🔴 важное</span></div>
          <h2 class="h2">С этого момента всё стало серьёзно</h2>
          <p class="text">Опиши, что изменилось. Как понял(а), что это не просто «приятно», а что-то глубже?</p>
          <div class="scroll-gallery" aria-label="фотолента">
            <img src="" alt="" />
            <img src="" alt="" />
            <img src="" alt="" />
            <img src="" alt="" />
          </div>
        </div>
      </section>

      <!-- 5. Общие ритуалы -->
      <section class="chapter reveal" data-tag="ритуалы" data-year="2">
        <div class="dot-col"><div class="dot"></div></div>
        <div class="card">
          <div class="time"><span class="badge">Ритуалы</span> <span>•</span> <span>Наши маленькие «всегда»</span></div>
          <h2 class="h2">Мелочи, из которых состоит «мы»</h2>
          <p class="text">Утренний кофе, определённый плейлист, фраза-запуск — собери сюда ваши микро-привычки.</p>
          <ul class="checklist">
            <li class="check"><i>✓</i><span>Смайл, который всё переводит.</span></li>
            <li class="check"><i>✓</i><span>Звуки города, которым вы радовались.</span></li>
            <li class="check"><i>✓</i><span>Твоя фраза «…» стала нашим паролем.</span></li>
          </ul>
        </div>
      </section>

      <!-- 6. Совместный челлендж -->
      <section class="chapter reveal" data-tag="челлендж" data-year="2">
        <div class="dot-col"><div class="dot"></div></div>
        <div class="card">
          <div class="time"><span class="badge">Челлендж</span> <span>•</span> <span>Мы справились</span></div>
          <h2 class="h2">Когда было непросто, но мы прошли</h2>
          <p class="text">Коротко, без драматизации: в чём была сложность и чему научила.</p>
          <div class="bubbles">
            <div class="bubble me"><strong>Тогда:</strong> «…»</div>
            <div class="bubble now"><strong>Сейчас:</strong> «…»</div>
          </div>
        </div>
      </section>

      <!-- 7. Спокойные дни -->
      <section class="chapter reveal" data-tag="тихий-радость" data-year="2">
        <div class="dot-col"><div class="dot"></div></div>
        <div class="card">
          <div class="time"><span class="badge">Ровно и тепло</span> <span>•</span> <span>Дни, которые лечат</span></div>
          <h2 class="h2">Тишина, в которой слышно счастье</h2>
          <p class="text">Иногда лучшая память — это отсутствие лишних слов. Опиши кадрами: свет в комнате, плед, чай, музыка.</p>
        </div>
      </section>

      <!-- 8. Общий смех -->
      <section class="chapter reveal" data-tag="смех" data-year="3">
        <div class="dot-col"><div class="dot"></div></div>
        <div class="card">
          <div class="time"><span class="badge">Смех</span> <span>•</span> <span>Мем-пак</span></div>
          <h2 class="h2">История, где мы не могли остановиться</h2>
          <p class="text">Тот эпизод, где смех сбивает дыхание. Зафиксируй пару цитат — достаточно буквально двух строк.</p>
          <p class="quote">«— …» — «…»</p>
        </div>
      </section>

      <!-- 9. Маленькие победы -->
      <section class="chapter reveal" data-tag="победы" data-year="3">
        <div class="dot-col"><div class="dot"></div></div>
        <div class="card">
          <div class="time"><span class="badge">Победа</span> <span>•</span> <span>Мы молодцы</span></div>
          <h2 class="h2">Когда получилось лучше, чем ожидали</h2>
          <p class="text">Итог + чему это нас научило (одно предложение).</p>
          <ul class="checklist">
            <li class="check"><i>✓</i><span>Мы сделали это вместе.</span></li>
            <li class="check"><i>✓</i><span>Сохранили спокойствие.</span></li>
            <li class="check"><i>✓</i><span>И добавили немного дерзости.</span></li>
          </ul>
        </div>
      </section>

      <!-- 10. Фото-лента лучших кадров -->
      <section class="chapter reveal" data-tag="фотолента" data-year="3">
        <div class="dot-col"><div class="dot"></div></div>
        <div class="card">
          <div class="time"><span class="badge">Фотолента</span> <span>•</span> <span>Только кадры</span></div>
          <h2 class="h2">Несколько мгновений, которые хочется повторить</h2>
          <div class="gallery" id="grid1">
            <img src="" alt="" data-full="" />
            <img src="" alt="" data-full="" />
            <img src="" alt="" data-full="" />
            <img src="" alt="" data-full="" />
            <img src="" alt="" data-full="" />
            <img src="" alt="" data-full="" />
          </div>
        </div>
      </section>

      <!-- 11–20. Повторяем паттерн с разными сюжетами для длины и глубины -->
      <section class="chapter reveal" data-tag="дорога" data-year="4">
        <div class="dot-col"><div class="dot"></div></div>
        <div class="card">
          <div class="time"><span class="badge">Путь</span> <span>•</span> <span>Дорога в никуда (которая привела куда надо)</span></div>
          <h2 class="h2">Диалоги на колёсах</h2>
          <p class="text">О чём мечтали, о чём молчали. Пусть здесь будет честная пара строк без украшений.</p>
        </div>
      </section>

      <section class="chapter reveal" data-tag="вкус" data-year="4">
        <div class="dot-col"><div class="dot"></div></div>
        <div class="card">
          <div class="time"><span class="badge">Вкус</span> <span>•</span> <span>Наши блюда</span></div>
          <h2 class="h2">Еда, которая стала символом</h2>
          <p class="text">Пицца? Шакшука? Рамен? Составь маленький список «наших вкусов» и почему они зацепили.</p>
        </div>
      </section>

      <section class="chapter reveal" data-tag="музыка" data-year="4">
        <div class="dot-col"><div class="dot"></div></div>
        <div class="card">
          <div class="time"><span class="badge">Музыка</span> <span>•</span> <span>Трек-лист</span></div>
          <h2 class="h2">Плейлист, который нас собирает</h2>
          <p class="text">3–7 треков, которые мгновенно возвращают в определённый день.</p>
          <details>
            <summary>Посмотреть список песен</summary>
            <ol class="text" style="margin:8px 0 0; padding-left:18px">
              <li>Трек 1 — причина</li>
              <li>Трек 2 — причина</li>
              <li>Трек 3 — причина</li>
              <li>…</li>
            </ol>
          </details>
        </div>
      </section>

      <section class="chapter reveal" data-tag="планы" data-year="5">
        <div class="dot-col"><div class="dot"></div></div>
        <div class="card">
          <div class="time"><span class="badge">Планы</span> <span>•</span> <span>Куда дальше</span></div>
          <h2 class="h2">Список желаний «на следующий год»</h2>
          <ul class="checklist">
            <li class="check"><i>✓</i><span>Место, куда хотим попасть.</span></li>
            <li class="check"><i>✓</i><span>Навык, который хотим вырастить.</span></li>
            <li class="check"><i>✓</i><span>Тихая мечта, о которой помним.</span></li>
          </ul>
        </div>
      </section>

      <section class="chapter reveal" data-tag="письмо" data-year="5">
        <div class="dot-col"><div class="dot"></div></div>
        <div class="card">
          <div class="time"><span class="badge">Письмо</span> <span>•</span> <span>Себе из будущего</span></div>
          <h2 class="h2">Если бы я писал(а) тебе через год</h2>
          <p class="text">Две-три строки, которые поддержат и обнимут.</p>
        </div>
      </section>

      <section class="chapter reveal" data-tag="награды" data-year="5">
        <div class="dot-col"><div class="dot"></div></div>
        <div class="card">
          <div class="time"><span class="badge">Награды</span> <span>•</span> <span>Грамоты души</span></div>
          <h2 class="h2">Медали за смешные достижения</h2>
          <ul class="checklist">
            <li class="check"><i>✓</i><span>Лучший смех в нужный момент.</span></li>
            <li class="check"><i>✓</i><span>Самый точный взгляд.</span></li>
            <li class="check"><i>✓</i><span>Суперспособность «быть собой».</span></li>
          </ul>
        </div>
      </section>

      <section class="chapter reveal" data-tag="благодарности" data-year="6">
        <div class="dot-col"><div class="dot"></div></div>
        <div class="card">
          <div class="time"><span class="badge">Благодарность</span> <span>•</span> <span>Список тёплых причин</span></div>
          <h2 class="h2">За что я тебя ценю</h2>
          <ul class="text" style="margin:0; padding-left:18px">
            <li>За смех, который лечит.</li>
            <li>За терпение к моим приколам.</li>
            <li>За то, как ты смотришь на мир.</li>
            <li>… добавь своё …</li>
          </ul>
        </div>
      </section>

      <section class="chapter reveal" data-tag="сегодня" data-year="сегодня">
        <div class="dot-col"><div class="dot"></div></div>
        <div class="card">
          <div class="time"><span class="badge">Сегодня</span> <span>•</span> <span>День Рождения</span></div>
          <h2 class="h2">Суть сейчас</h2>
          <p class="text">Коротко о текущем моменте: что ценю прямо сейчас, чем горжусь, чего желаю тебе на год вперёд.</p>
          <audio id="song" preload="auto" style="width:100%; margin-top:8px" controls>
            <source src="" type="audio/mpeg" />
          </audio>
        </div>
      </section>

      <!-- Финал -->
      <section class="chapter reveal" data-tag="финал" data-year="итог" id="final">
        <div class="dot-col"><div class="dot"></div></div>
        <div class="card">
          <div class="time"><span class="badge">Финал</span></div>
          <div class="big">С Днём Рождения, <span id="herNameFinal">[Имя]</span>!</div>
          <p class="text type" id="typeTarget"></p>
          <div class="actions">
            <button class="btn primary" id="shareBtn2">Поделиться сайтом</button>
            <button class="btn" id="replayBtn">Ещё раз напечатать</button>
          </div>
        </div>
      </section>

    </article>
  </main>

  <!-- =================================================================== -->
  <!-- BOTTOM BAR (быстрые действия)                                      -->
  <!-- =================================================================== -->
  <div class="bottom-bar">
    <button class="btn" id="jumpTop">В начало</button>
    <button class="btn" id="jumpToday">К «Сегодня»</button>
    <button class="btn" id="musicBtn">Музыка</button>
  </div>

  <!-- =================================================================== -->
  <!-- MODAL                                                               -->
  <!-- =================================================================== -->
  <div class="modal" id="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="modal-card">
      <div class="modal-header">
        <strong id="modalTitle">Просмотр</strong>
        <button class="close" id="modalClose" aria-label="Закрыть">✕</button>
      </div>
      <div id="modalBody" class="text"></div>
    </div>
  </div>

  <!-- =================================================================== -->
  <!-- SCRIPTS                                                             -->
  <!-- =================================================================== -->
  <script>
    // ====================================================================
    // SMALL HELPERS
    // ====================================================================
    const $ = (s,scope=document)=>scope.querySelector(s);
    const $$ = (s,scope=document)=>Array.from(scope.querySelectorAll(s));

    // Smooth scroll helper
    function scrollToId(id){
      const el = document.getElementById(id);
      if(!el) return;
      el.scrollIntoView({ behavior:'smooth', block:'start' });
    }

    // Local storage
    const LS = {
      get:(k,d=null)=>{ try{ return JSON.parse(localStorage.getItem(k)) ?? d }catch{ return d } },
      set:(k,v)=>localStorage.setItem(k, JSON.stringify(v))
    };

    // ====================================================================
    // PROGRESS BAR
    // ====================================================================
    const pb = $('#progressBar');
    function onScroll(){
      const h = document.documentElement;
      const scroll = h.scrollTop;
      const max = h.scrollHeight - h.clientHeight;
      const pct = Math.min(1, Math.max(0, scroll / max));
      pb.style.width = (pct * 100).toFixed(2) + '%';
    }
    document.addEventListener('scroll', onScroll, { passive:true });
    onScroll();

    // ====================================================================
    // INTERSECTION OBSERVER: reveal + active dot
    // ====================================================================
    const io = new IntersectionObserver((entries)=>{
      for(const e of entries){
        if(e.isIntersecting){ e.target.classList.add('show'); e.target.classList.add('active'); io.unobserve(e.target); }
      }
    }, { threshold:.12 });
    $$('.reveal').forEach(el=>io.observe(el));

    // ====================================================================
    // TYPEWRITER (финальное сообщение)
    // ====================================================================
    const TYPE_TEXT = `Спасибо за все наши моменты — маленькие и большие.\nПусть дальше будет ещё громче, ярче там, где нужно, и спокойнее там, где важно.\nЯ рядом. Всегда.`;
    const typeTarget = $('#typeTarget');
    function typeWriter(text){
      typeTarget.textContent = '';
      let i=0; const tick=()=>{ if(i<=text.length){ typeTarget.textContent = text.slice(0,i++); setTimeout(tick, 22); } };
      tick();
    }
    typeWriter(TYPE_TEXT);
    $('#replayBtn').addEventListener('click', ()=> typeWriter(TYPE_TEXT));

    // ====================================================================
    // THEME TOGGLE
    // ====================================================================
    const THEME_KEY = 'hb-theme';
    function applyTheme(t){ document.body.classList.toggle('light', t==='light'); }
    applyTheme(LS.get(THEME_KEY,'dark'));
    $('#themeBtn').addEventListener('click', ()=>{ const next = document.body.classList.contains('light') ? 'dark' : 'light'; LS.set(THEME_KEY,next); applyTheme(next); });

    // ====================================================================
    // SHARE API
    // ====================================================================
    async function tryShare(){
      const title = document.title;
      const text = 'Я сделал(а) для тебя наш персональный сайт-поздравление';
      try{
        if(navigator.share){ await navigator.share({ title, text, url: location.href }); }
        else{ await navigator.clipboard.writeText(location.href); alert('Ссылка скопирована'); }
      }catch(e){ /* ignore */ }
    }
    $('#shareBtn').addEventListener('click', tryShare);
    $('#shareBtn2').addEventListener('click', tryShare);

    // ====================================================================
    // MUSIC CONTROL (внизу)
    // ====================================================================
    const musicBtn = $('#musicBtn');
    const music = $('#song');
    musicBtn.addEventListener('click', async ()=>{
      if(!music || !music.querySelector('source')?.src){ alert('Добавь файл песни в <audio>'); return; }
      try{
        if(music.paused){ await music.play(); musicBtn.textContent='Музыка ⏸'; }
        else{ music.pause(); musicBtn.textContent='Музыка ▶︎'; }
      }catch(err){ console.log(err); }
    });

    // Пауза при сворачивании
    document.addEventListener('visibilitychange', ()=>{ if(document.hidden && music && !music.paused){ music.pause(); musicBtn.textContent='Музыка ▶︎'; }});

    // ====================================================================
    // TABS (по годам/тегам) — генерим из разметки
    // ====================================================================
    const chapters = $$('.chapter');
    const tabsWrap = $('#tabs');
    const groups = new Map();
    for(const ch of chapters){
      const y = ch.dataset.year || '—';
      if(!groups.has(y)) groups.set(y, []);
      groups.get(y).push(ch);
    }

    // Создаём кнопки
    for(const [year, list] of groups){
      const b = document.createElement('button');
      b.className = 'tab';
      b.textContent = year.toUpperCase();
      b.addEventListener('click', ()=> list[0].scrollIntoView({behavior:'smooth'}));
      tabsWrap.appendChild(b);
    }

    // Подсветка активного таба по скроллу
    const tabButtons = $$('.tab', tabsWrap);
    const obs = new IntersectionObserver((entries)=>{
      const visible = entries.filter(e=>e.isIntersecting).map(e=>e.target);
      if(visible.length){
        const top = visible.sort((a,b)=> a.getBoundingClientRect().top - b.getBoundingClientRect().top)[0];
        const year = top.dataset.year;
        tabButtons.forEach(btn=> btn.classList.toggle('active', btn.textContent.toLowerCase()===String(year).toLowerCase()));
      }
    }, { threshold:.6, rootMargin:'-20% 0px -70% 0px' });
    chapters.forEach(ch=>obs.observe(ch));

    // ====================================================================
    // MODAL (просмотр изображений/цитат)
    // ====================================================================
    const modal = $('#modal');
    const modalBody = $('#modalBody');
    const modalClose = $('#modalClose');
    function openModal(node){ modalBody.innerHTML=''; modalBody.appendChild(node); modal.classList.add('show'); document.body.style.overflow='hidden'; }
    function closeModal(){ modal.classList.remove('show'); modalBody.innerHTML=''; document.body.style.overflow=''; }
    modalClose.addEventListener('click', closeModal);
    modal.addEventListener('click', (e)=>{ if(e.target===modal) closeModal(); });

    // Клик по картинкам -> превью
    $$('.gallery img').forEach(img=>{
      img.addEventListener('click', ()=>{
        const full = document.createElement('img');
        full.src = img.dataset.full || img.src;
        full.alt = img.alt || '';
        full.style.borderRadius = '12px';
        full.style.border = '1px solid var(--line)';
        openModal(full);
      });
    });

    // ====================================================================
    // QUICK JUMPS
    // ====================================================================
    $('#jumpTop').addEventListener('click', ()=> scrollToId('hero'));
    $('#jumpToday').addEventListener('click', ()=>{
      const today = chapters.find(c=> (c.dataset.year||'').toLowerCase()==='сегодня');
      (today ?? $('#final')).scrollIntoView({behavior:'smooth'});
    });

    // ====================================================================
    // QUICK PERSONALIZATION (имя)
    // ====================================================================
    const herName = '[Имя]'; // ← замени одно значение — применится в двух местах
    $('#herName').textContent = herName;
    $('#herNameFinal').textContent = herName;
  </script>
</body>
</html>
